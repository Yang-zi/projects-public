(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/baobiao/baobiao"],{"0f48":function(t,e,n){},"583f":function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return s(t)||d(t,e)||c(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function d(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,i=!1,a=void 0;try{for(var r,u=t[Symbol.iterator]();!(o=(r=u.next()).done);o=!0)if(n.push(r.value),e&&n.length===e)break}catch(c){i=!0,a=c}finally{try{o||null==u["return"]||u["return"]()}finally{if(i)throw a}}return n}}function s(t){if(Array.isArray(t))return t}function f(t,e,n,o,i,a,r){try{var u=t[a](r),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(o,i)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(t){f(a,o,i,r,u,"next",t)}function u(t){f(a,o,i,r,u,"throw",t)}r(void 0)}))}}var p={data:function(){return{currentDate:(new Date).toISOString().slice(0,10),leftNav:[{title:"型号"},{title:"工单号"},{title:"今日新装"},{title:"在测"},{title:"送检"},{title:"累计完成"},{title:"异常处理中"}],dataList:[],popupData:{xinghao:"",orderNumber:""},inputFiled:{index:null,field:"",model:""},inputDialog:"",rightBxWidth:0,deleteInfo:{is:!1,model:"",id:""}}},onReady:function(){this.getData()},onLoad:function(t){},onUnload:function(){},computed:{titleChange:function(){return this.inputFiled.model+"-"+this.filedCdn(this.inputFiled.field)},totalCalc:function(){var t=this;return function(e){var n=0;return t.dataList.forEach((function(t,o){n+=Number(t[e])})),n}},deleteTitle:function(){return"确认删除当前机型(".concat(this.deleteInfo.model,")？")}},methods:{getData:function(){var e=this;t.callFunction({name:"getbaobiao"}).then((function(t){e.dataList=t.result})).catch((function(t){o.showModal({content:"获取数据失败：".concat(t.message),showCancel:!1})}))},handleLoad:function(t,e,n){this.dataList=t},add:function(){this.$refs.popupAdd.open()},popupClose:function(){this.$refs.popupAdd.close()},popupChange:function(t){this.popupData.xinghao="",this.popupData.orderNumber=""},popupSubmit:function(){var e=this;return h(i.default.mark((function n(){var a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.popupData,""!=a.xinghao&&a.xinghao){n.next=3;break}return n.abrupt("return");case 3:return o.showLoading({title:"请等待..."}),n.next=6,t.callFunction({name:"jixingAdd",data:{model:a.xinghao,order:a.orderNumber,createTime:Date.now()}}).then((function(t){var n=e;return o.hideLoading(),o.showToast({title:"添加成功",success:function(){n.getData(),n.popupClose()}}),t.result.id})).catch((function(t){o.hideLoading(),o.showModal({content:"添加失败，错误信息为：".concat(t.message),showCancel:!1})}));case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})))()},inputClick:function(t,e){var n=this;n.inputFiled.index=t,n.inputFiled.field=e,n.inputFiled.model=n.dataList[t].model,n.inputDialog=n.dataList[t][e],n.$refs.inputDialog.open()},dialogClose:function(){this.$refs.inputDialog.close()},dialogInputConfirm:function(e){var n=this;return h(i.default.mark((function a(){var r,u;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=n,n.isNumber(e)&&!n.isXiaoShu(e)||"model"==r.inputFiled.field||"order"==r.inputFiled.field){i.next=4;break}return o.showToast({title:"请输入正确的数字",icon:"none",duration:2e3}),i.abrupt("return");case 4:return u={id:r.dataList[r.inputFiled.index]._id,createTime:Date.now()},u[r.inputFiled.field]=e,o.showLoading({title:"修改中..."}),i.next=9,t.callFunction({name:"update",data:u}).then((function(t){return n.editData(t.result),o.hideLoading(),n.$refs.inputDialog.close(),t.result.msg})).catch((function(t){console.log(JSON.stringify(t)),o.hideLoading(),o.showModal({content:"修改失败".concat(t.message),showCancel:!1})}));case 9:return i.abrupt("return",i.sent);case 10:case"end":return i.stop()}}),a)})))()},filedCdn:function(t){return"model"==t?"型号":"order"==t?"工单号":"robotNewNum"==t?"今日新装":"robotTestNum"==t?"在测":"robotInspectNum"==t?"送检":"robotTotalNum"==t?"累计完成":"robotAbnormal"==t?"异常处理中":""},editData:function(t){var e=this.dataList.findIndex((function(e,n){return e._id==t.id}));t.createTime&&delete t.createTime;for(var n=0,o=Object.entries(t);n<o.length;n++){var i=r(o[n],2),a=i[0],u=i[1];this.dataList[e][a]=u}},deletebt:function(){this.deleteInfo.is=!this.deleteInfo.is},deleteFuc:function(t){var e=this.dataList[t];this.deleteInfo.id=e._id,this.deleteInfo.model=e.model,this.$refs.deleteDialog.open()},deleteConfirm:function(){var e=this;return h(i.default.mark((function n(){var a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e,o.showLoading({title:"正在删除..."}),n.next=4,t.callFunction({name:"delete",data:{id:a.deleteInfo.id}}).then((function(t){var n="";return o.hideLoading(),n=200==t.result.status?"success":"none",o.showToast({title:t.result.message,icon:n,duration:2e3}),e.$refs.deleteDialog.close(),a.getData(),t.result})).catch((function(t){o.hideLoading(),o.showModal({content:"删除失败".concat(t.message),showCancel:!1})}));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},isNumber:function(t){var e=/^\d+(\.\d+)?$/,n=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return!(!e.test(t)&&!n.test(t))},isXiaoShu:function(t){var e=t+"";return-1!=e.indexOf(".")}}};e.default=p}).call(this,n("a9ff")["default"],n("543d")["default"])},"5ac5":function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.totalCalc("robotNewNum")),o=t.totalCalc("robotTestNum"),i=t.totalCalc("robotInspectNum"),a=t.totalCalc("robotTotalNum"),r=t.totalCalc("robotAbnormal");t.$mp.data=Object.assign({},{$root:{m0:n,m1:o,m2:i,m3:a,m4:r}})},a=[]},"973c":function(t,e,n){"use strict";n.r(e);var o=n("583f"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},b780:function(t,e,n){"use strict";(function(t){n("e181"),n("921b");o(n("66fd"));var e=o(n("ec4e"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},b978:function(t,e,n){"use strict";var o=n("0f48"),i=n.n(o);i.a},ec4e:function(t,e,n){"use strict";n.r(e);var o=n("5ac5"),i=n("973c");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("b978");var r,u=n("f0c5"),c=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=c.exports}},[["b780","common/runtime","common/vendor"]]]);